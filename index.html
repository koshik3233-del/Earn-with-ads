<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdWatch Pro - Watch Ads & Earn</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Sign-in API -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Third Ad Script -->
    <script type="text/javascript" src="//warhealthy.com/29/b1/7f/29b17f6af198a7b755d2d78662eafa74.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #6C63FF;
            --secondary: #4A44C6;
            --accent: #FF6584;
            --success: #2ECC71;
            --warning: #F39C12;
            --dark: #2D3047;
            --light: #F8F9FA;
            --gray: #6C757D;
            --shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Login/Signup Page */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .auth-card {
            background: white;
            border-radius: 20px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 450px;
            overflow: hidden;
        }

        .auth-header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .auth-header .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .auth-header .logo i {
            color: var(--accent);
        }

        .auth-header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .auth-content {
            padding: 40px 30px;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
        }

        .tab-btn {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab-btn.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            margin-bottom: -2px;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .auth-btn {
            width: 100%;
            padding: 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 10px;
        }

        .auth-btn:hover {
            background: var(--secondary);
        }

        .auth-btn.google {
            background: white;
            color: #444;
            border: 2px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .auth-btn.google:hover {
            background: #f8f9fa;
        }

        .divider {
            text-align: center;
            margin: 25px 0;
            position: relative;
        }

        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #eee;
        }

        .divider span {
            background: white;
            padding: 0 15px;
            color: var(--gray);
            position: relative;
        }

        .forgot-password {
            text-align: center;
            margin-top: 20px;
        }

        .forgot-password a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .auth-footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: var(--gray);
        }

        .auth-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        /* Google Sign-in Button Styling */
        .g_id_signin {
            width: 100% !important;
            margin: 10px 0 !important;
            border-radius: 10px !important;
            overflow: hidden !important;
        }

        /* App Content */
        #app-content {
            display: none;
        }

        /* Header */
        header {
            background: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            transition: color 0.3s;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a.active {
            color: var(--primary);
        }

        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
            border-radius: 2px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .wallet-balance {
            background: var(--primary);
            color: white;
            padding: 10px 15px;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px 15px;
            border-radius: 50px;
            transition: background 0.3s;
        }

        .user-profile:hover {
            background: rgba(108, 99, 255, 0.1);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid var(--primary);
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-name {
            font-weight: 600;
        }

        /* Main Content */
        .dashboard {
            margin-top: 30px;
        }

        .welcome-banner {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        .welcome-banner h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
        }

        .stat-icon.earnings {
            background: var(--success);
        }

        .stat-icon.ads-watched {
            background: var(--primary);
        }

        .stat-info h3 {
            font-size: 1rem;
            color: var(--gray);
            margin-bottom: 5px;
        }

        .stat-info .amount {
            font-size: 1.8rem;
            font-weight: 700;
        }

        /* Ads Section */
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ads-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .ad-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .ad-card:hover {
            transform: translateY(-5px);
        }

        .ad-header {
            padding: 20px;
            background: var(--light);
            border-bottom: 1px solid #eee;
        }

        .ad-category {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .ad-title {
            font-size: 1.3rem;
            margin: 10px 0;
        }

        .ad-body {
            padding: 20px;
        }

        .ad-duration {
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 15px;
        }

        .ad-reward {
            background: #E8F5E9;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .reward-amount {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--success);
        }

        .watch-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            width: 100%;
        }

        .watch-btn:hover {
            background: var(--secondary);
        }

        /* External Ad Buttons */
        .external-ad-btn {
            background: linear-gradient(to right, #FF416C, #FF4B2B);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: transform 0.3s;
        }

        .external-ad-btn:hover {
            transform: translateY(-2px);
        }

        .external-ad-btn.secondary {
            background: linear-gradient(to right, #36D1DC, #5B86E5);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 500px;
            border-radius: 15px;
            overflow: hidden;
        }

        .modal-header {
            background: var(--primary);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 1.5rem;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .modal-body {
            padding: 30px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 20px;
            }

            .nav-links {
                gap: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .user-info {
                flex-direction: column;
                gap: 10px;
            }

            .welcome-banner h1 {
                font-size: 2rem;
            }
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden {
            display: none !important;
        }

        .error-message {
            color: #ff4444;
            background: #ffebee;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            text-align: center;
            font-size: 0.9rem;
        }

        .success-message {
            color: #00C851;
            background: #e8f5e9;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            text-align: center;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Login/Signup Page -->
    <div id="auth-page" class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <div class="logo">
                    <i class="fas fa-ad"></i>
                    <span>AdWatch Pro</span>
                </div>
                <p>Watch ads, track your progress, and earn rewards</p>
            </div>

            <div class="auth-content">
                <div class="auth-tabs">
                    <button class="tab-btn active" onclick="switchAuthTab('login')">Login</button>
                    <button class="tab-btn" onclick="switchAuthTab('signup')">Sign Up</button>
                </div>

                <!-- Error/Success Messages -->
                <div id="auth-message" class="hidden"></div>

                <!-- Login Form -->
                <form id="login-form" class="auth-form active" onsubmit="handleEmailLogin(event)">
                    <div class="form-group">
                        <label for="login-email">Email Address</label>
                        <input type="email" id="login-email" class="form-input" placeholder="Enter your email" required>
                    </div>

                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" class="form-input" placeholder="Enter your password" required>
                    </div>

                    <button type="submit" class="auth-btn" id="login-btn">
                        <span>Login</span>
                        <div class="spinner hidden" id="login-spinner"></div>
                    </button>

                    <div class="divider">
                        <span>Or continue with</span>
                    </div>

                    <!-- Google Sign-in Button -->
                    <div id="g_id_onload"
                         data-client_id="446243892340-4hn81acdbclhmthe849t3ll2s4uc6v5r.apps.googleusercontent.com"
                         data-context="signin"
                         data-ux_mode="popup"
                         data-callback="handleGoogleSignIn"
                         data-auto_prompt="false">
                    </div>

                    <div class="g_id_signin"
                         data-type="standard"
                         data-shape="rectangular"
                         data-theme="outline"
                         data-text="signin_with"
                         data-size="large"
                         data-logo_alignment="left">
                    </div>

                    <div class="forgot-password">
                        <a href="#" onclick="showForgotPassword()">Forgot your password?</a>
                    </div>
                </form>

                <!-- Signup Form -->
                <form id="signup-form" class="auth-form" onsubmit="handleEmailSignup(event)">
                    <div class="form-group">
                        <label for="signup-name">Full Name</label>
                        <input type="text" id="signup-name" class="form-input" placeholder="Enter your full name" required>
                    </div>

                    <div class="form-group">
                        <label for="signup-email">Email Address</label>
                        <input type="email" id="signup-email" class="form-input" placeholder="Enter your email" required>
                    </div>

                    <div class="form-group">
                        <label for="signup-password">Password</label>
                        <input type="password" id="signup-password" class="form-input" placeholder="Create a password (min 6 characters)" required minlength="6">
                    </div>

                    <div class="form-group">
                        <label for="signup-confirm">Confirm Password</label>
                        <input type="password" id="signup-confirm" class="form-input" placeholder="Confirm your password" required>
                    </div>

                    <button type="submit" class="auth-btn" id="signup-btn">
                        <span>Create Account</span>
                        <div class="spinner hidden" id="signup-spinner"></div>
                    </button>

                    <div class="divider">
                        <span>Or sign up with</span>
                    </div>

                    <!-- Alternative Google Sign-up Button -->
                    <button type="button" class="auth-btn google" onclick="handleGoogleSignUp()">
                        <i class="fab fa-google"></i>
                        <span>Sign up with Google</span>
                    </button>
                </form>

                <div class="auth-footer">
                    <p>By continuing, you agree to our <a href="#" onclick="showTerms()">Terms of Service</a> and <a href="#" onclick="showPrivacy()">Privacy Policy</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Content -->
    <div id="app-content">
        <!-- Header -->
        <header>
            <div class="container">
                <nav class="navbar">
                    <div class="logo">
                        <i class="fas fa-ad"></i>
                        <span>AdWatch Pro</span>
                    </div>
                    
                    <div class="nav-links">
                        <a href="#" class="nav-link active" data-page="dashboard">
                            <i class="fas fa-home"></i> Dashboard
                        </a>
                        <a href="#" class="nav-link" data-page="ads">
                            <i class="fas fa-ad"></i> Watch Ads
                        </a>
                        <a href="#" class="nav-link" data-page="history">
                            <i class="fas fa-history"></i> History
                        </a>
                        <a href="#" class="nav-link" data-page="profile">
                            <i class="fas fa-user"></i> Profile
                        </a>
                    </div>
                    
                    <div class="user-info">
                        <div class="wallet-balance">
                            <i class="fas fa-eye"></i>
                            <span>Ads: <span id="total-ads">0</span></span>
                        </div>
                        <div class="user-profile" onclick="toggleProfileMenu()">
                            <div class="user-avatar">
                                <img id="user-avatar" src="https://ui-avatars.com/api/?name=User&background=6C63FF&color=fff" alt="User Avatar">
                            </div>
                            <div class="user-name" id="user-display-name">User</div>
                        </div>
                    </div>
                </nav>
            </div>
        </header>

        <!-- Dashboard Page -->
        <div class="page active" id="dashboard-page">
            <div class="container">
                <div class="dashboard">
                    <div class="welcome-banner">
                        <h1 id="welcome-message">Welcome back!</h1>
                        <p>Start watching ads and track your progress</p>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon earnings">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Total Ads Watched</h3>
                                <div class="amount" id="total-ads-count">0</div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon ads-watched">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Total Watch Time</h3>
                                <div class="amount" id="total-watch-time">0 min</div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon" style="background: var(--accent);">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Today's Ads</h3>
                                <div class="amount" id="today-ads">0</div>
                            </div>
                        </div>
                    </div>

                    <h2 class="section-title">
                        <i class="fas fa-bolt"></i> Quick Actions
                    </h2>
                    
                    <div class="ads-container" id="dashboard-ads">
                        <!-- Ads will be loaded dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Ads Page -->
        <div class="page" id="ads-page">
            <div class="container">
                <h1 class="section-title">
                    <i class="fas fa-ad"></i> Available Ads
                </h1>
                
                <div class="ads-container" id="ads-list">
                    <!-- Ads will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- History Page -->
        <div class="page" id="history-page">
            <div class="container">
                <div class="auth-card" style="max-width: 800px;">
                    <div class="auth-header">
                        <h1 style="font-size: 2rem;">Watch History</h1>
                        <p>Track all ads you've watched</p>
                    </div>
                    
                    <div class="auth-content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon" style="background: var(--primary);">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Total Watched</h3>
                                    <div class="amount" id="history-total">0</div>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon" style="background: var(--accent);">
                                    <i class="fas fa-calendar-day"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Today's Watched</h3>
                                    <div class="amount" id="history-today">0</div>
                                </div>
                            </div>
                        </div>

                        <div id="history-content">
                            <h2 class="section-title" style="margin-top: 30px;">
                                <i class="fas fa-list"></i> Recent Activity
                            </h2>
                            <div id="history-items">
                                <!-- History items will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div class="page" id="profile-page">
            <div class="container">
                <div class="auth-card" style="max-width: 800px;">
                    <div class="auth-header">
                        <h1 style="font-size: 2rem;">Your Profile</h1>
                        <p>Manage your account and preferences</p>
                    </div>
                    
                    <div class="auth-content">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <div style="width: 100px; height: 100px; border-radius: 50%; overflow: hidden; margin: 0 auto 20px; border: 4px solid var(--primary);">
                                <img id="profile-avatar" src="https://ui-avatars.com/api/?name=User&background=6C63FF&color=fff&size=100" alt="Profile" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <h2 id="profile-name">User Name</h2>
                            <p id="profile-email">user@example.com</p>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon" style="background: var(--primary);">
                                    <i class="fas fa-user-clock"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Member Since</h3>
                                    <div class="amount" id="member-since">Today</div>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon" style="background: var(--success);">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Daily Average</h3>
                                    <div class="amount" id="daily-average">0</div>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 30px;">
                            <button class="auth-btn" onclick="logout()" style="background: var(--accent);">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ad Watching Modal -->
    <div class="modal" id="adModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Watching Ad</h2>
                <button class="close-modal" onclick="closeModal('adModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center;">
                    <div id="adTimer" style="font-size: 3rem; font-weight: 700; color: var(--primary); margin: 20px 0;">30</div>
                    <p>Please watch the ad for <span id="adDuration">30</span> seconds</p>
                    
                    <div style="background: #f0f0f0; height: 200px; border-radius: 10px; margin: 20px 0; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-play-circle" style="font-size: 4rem; color: var(--primary);"></i>
                    </div>
                    
                    <div id="adProgress" style="height: 10px; background: #ddd; border-radius: 5px; margin: 20px 0;">
                        <div id="adProgressBar" style="height: 100%; width: 0%; background: var(--primary); border-radius: 5px;"></div>
                    </div>
                    
                    <p id="adMessage" style="margin: 20px 0; font-weight: 600;">Ad will complete in <span id="timeLeft">30</span> seconds</p>
                    
                    <button id="completeAdBtn" class="watch-btn" style="display: none;" onclick="completeAd()">
                        <i class="fas fa-check"></i> Complete Ad
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- First Ad Script -->
    <script type="text/javascript" src="//warhealthy.com/3f/fa/28/3ffa288c74e0d020cbf90bd1d9d329ee.js"></script>

    <script>
        // ============================================
        // CONFIGURATION - WITH YOUR CLIENT ID
        // ============================================
        
        // YOUR Google Client ID
        const GOOGLE_CLIENT_ID = "446243892340-4hn81acdbclhmthe849t3ll2s4uc6v5r.apps.googleusercontent.com";
        
        // Firebase Configuration (You need to add this from Firebase Console)
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY_HERE",
            authDomain: "YOUR_AUTH_DOMAIN_HERE",
            projectId: "YOUR_PROJECT_ID_HERE",
            storageBucket: "YOUR_STORAGE_BUCKET_HERE",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID_HERE",
            appId: "YOUR_APP_ID_HERE"
        };

        // ============================================
        // FIREBASE INITIALIZATION
        // ============================================
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // ============================================
        // APPLICATION STATE
        // ============================================
        let currentUser = null;
        let userData = {
            totalAdsWatched: 0,
            todayAdsWatched: 0,
            totalWatchTime: 0,
            watchHistory: [],
            memberSince: new Date().toISOString()
        };

        let adTimer = null;
        let currentAdDuration = 0;
        let currentAdTitle = '';

        // ============================================
        // AUTHENTICATION FUNCTIONS
        // ============================================

        // Check authentication state
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                loadUserData();
                showApp();
            } else {
                showAuth();
            }
        });

        function switchAuthTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.auth-form').forEach(form => {
                form.classList.remove('active');
            });
            
            document.querySelector(`.tab-btn[onclick="switchAuthTab('${tab}')"]`).classList.add('active');
            document.getElementById(`${tab}-form`).classList.add('active');
            
            // Clear any messages
            clearAuthMessage();
        }

        function showAuthMessage(message, type = 'error') {
            const authMessageDiv = document.getElementById('auth-message');
            authMessageDiv.className = type === 'error' ? 'error-message' : 'success-message';
            authMessageDiv.textContent = message;
            authMessageDiv.classList.remove('hidden');
        }

        function clearAuthMessage() {
            const authMessageDiv = document.getElementById('auth-message');
            authMessageDiv.classList.add('hidden');
            authMessageDiv.textContent = '';
        }

        async function handleEmailLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const loginBtn = document.getElementById('login-btn');
            const loginSpinner = document.getElementById('login-spinner');
            
            // Validate input
            if (!email || !password) {
                showAuthMessage('Please fill in all fields');
                return;
            }
            
            // Show loading
            loginBtn.querySelector('span').classList.add('hidden');
            loginSpinner.classList.remove('hidden');
            clearAuthMessage();
            
            try {
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                currentUser = userCredential.user;
                showAuthMessage('Login successful!', 'success');
                
                // Small delay to show success message
                setTimeout(() => {
                    loadUserData();
                    showApp();
                }, 1000);
                
            } catch (error) {
                console.error('Login error:', error);
                showAuthMessage(getErrorMessage(error.code));
            } finally {
                loginBtn.querySelector('span').classList.remove('hidden');
                loginSpinner.classList.add('hidden');
            }
        }

        async function handleEmailSignup(event) {
            event.preventDefault();
            
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm').value;
            const signupBtn = document.getElementById('signup-btn');
            const signupSpinner = document.getElementById('signup-spinner');
            
            // Validation
            if (!name || !email || !password || !confirmPassword) {
                showAuthMessage('Please fill in all fields');
                return;
            }
            
            if (password !== confirmPassword) {
                showAuthMessage('Passwords do not match');
                return;
            }
            
            if (password.length < 6) {
                showAuthMessage('Password must be at least 6 characters long');
                return;
            }
            
            // Show loading
            signupBtn.querySelector('span').classList.add('hidden');
            signupSpinner.classList.remove('hidden');
            clearAuthMessage();
            
            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                currentUser = userCredential.user;
                
                // Update user profile
                await currentUser.updateProfile({
                    displayName: name
                });
                
                // Create user document in Firestore
                await db.collection('users').doc(currentUser.uid).set({
                    name: name,
                    email: email,
                    totalAdsWatched: 0,
                    todayAdsWatched: 0,
                    totalWatchTime: 0,
                    watchHistory: [],
                    memberSince: new Date().toISOString(),
                    lastActive: new Date().toISOString()
                });
                
                showAuthMessage('Account created successfully!', 'success');
                
                // Small delay to show success message
                setTimeout(() => {
                    showApp();
                }, 1000);
                
            } catch (error) {
                console.error('Signup error:', error);
                showAuthMessage(getErrorMessage(error.code));
            } finally {
                signupBtn.querySelector('span').classList.remove('hidden');
                signupSpinner.classList.add('hidden');
            }
        }

        function handleGoogleSignIn(response) {
            console.log('Google Sign-in response:', response);
            
            const credential = firebase.auth.GoogleAuthProvider.credential(response.credential);
            
            auth.signInWithCredential(credential)
                .then((result) => {
                    currentUser = result.user;
                    
                    // Check if user exists in Firestore
                    db.collection('users').doc(currentUser.uid).get()
                        .then((doc) => {
                            if (!doc.exists) {
                                // Create new user document
                                db.collection('users').doc(currentUser.uid).set({
                                    name: currentUser.displayName,
                                    email: currentUser.email,
                                    totalAdsWatched: 0,
                                    todayAdsWatched: 0,
                                    totalWatchTime: 0,
                                    watchHistory: [],
                                    memberSince: new Date().toISOString(),
                                    lastActive: new Date().toISOString()
                                }).then(() => {
                                    loadUserData();
                                    showApp();
                                });
                            } else {
                                loadUserData();
                                showApp();
                            }
                        })
                        .catch((error) => {
                            console.error('Firestore error:', error);
                            showAuthMessage('Error accessing user data');
                        });
                })
                .catch((error) => {
                    console.error('Google Sign-in Error:', error);
                    showAuthMessage('Failed to sign in with Google. Please try again.');
                });
        }

        async function handleGoogleSignUp() {
            const provider = new firebase.auth.GoogleAuthProvider();
            provider.addScope('profile');
            provider.addScope('email');
            
            try {
                const result = await auth.signInWithPopup(provider);
                currentUser = result.user;
                
                // Check if user exists in Firestore
                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                
                if (!userDoc.exists) {
                    // Create new user document
                    await db.collection('users').doc(currentUser.uid).set({
                        name: currentUser.displayName,
                        email: currentUser.email,
                        totalAdsWatched: 0,
                        todayAdsWatched: 0,
                        totalWatchTime: 0,
                        watchHistory: [],
                        memberSince: new Date().toISOString(),
                        lastActive: new Date().toISOString()
                    });
                }
                
                showApp();
            } catch (error) {
                console.error('Google Sign-up Error:', error);
                showAuthMessage('Failed to sign up with Google. Please try again.');
            }
        }

        async function logout() {
            try {
                await auth.signOut();
                currentUser = null;
                showAuth();
                showAuthMessage('Logged out successfully', 'success');
            } catch (error) {
                console.error('Logout Error:', error);
                showAuthMessage('Failed to logout. Please try again.');
            }
        }

        function showForgotPassword() {
            const email = prompt('Enter your email to reset password:');
            if (email) {
                auth.sendPasswordResetEmail(email)
                    .then(() => {
                        alert('Password reset email sent! Check your inbox.');
                    })
                    .catch((error) => {
                        alert(getErrorMessage(error.code));
                    });
            }
        }

        // ============================================
        // USER DATA FUNCTIONS
        // ============================================

        async function loadUserData() {
            if (!currentUser) return;
            
            try {
                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                
                if (userDoc.exists) {
                    userData = userDoc.data();
                    
                    // Check if day has changed
                    const today = new Date().toDateString();
                    const lastActive = userData.lastActive ? new Date(userData.lastActive).toDateString() : today;
                    
                    if (today !== lastActive) {
                        userData.todayAdsWatched = 0;
                        await db.collection('users').doc(currentUser.uid).update({
                            todayAdsWatched: 0,
                            lastActive: new Date().toISOString()
                        });
                    }
                    
                    updateUI();
                    loadAds();
                    loadHistory();
                }
            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }

        async function saveUserData() {
            if (!currentUser) return;
            
            try {
                await db.collection('users').doc(currentUser.uid).update({
                    ...userData,
                    lastActive: new Date().toISOString()
                });
            } catch (error) {
                console.error('Error saving user data:', error);
            }
        }

        // ============================================
        // UI FUNCTIONS
        // ============================================

        function showAuth() {
            document.getElementById('auth-page').style.display = 'flex';
            document.getElementById('app-content').style.display = 'none';
            clearAuthMessage();
        }

        function showApp() {
            document.getElementById('auth-page').style.display = 'none';
            document.getElementById('app-content').style.display = 'block';
            
            updateUI();
        }

        function updateUI() {
            if (!currentUser) return;
            
            // Update user info
            const displayName = currentUser.displayName || currentUser.email.split('@')[0] || 'User';
            document.getElementById('user-display-name').textContent = displayName;
            document.getElementById('welcome-message').textContent = `Welcome back, ${displayName}!`;
            document.getElementById('profile-name').textContent = displayName;
            document.getElementById('profile-email').textContent = currentUser.email;
            
            // Update avatar
            const avatarUrl = currentUser.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(displayName)}&background=6C63FF&color=fff`;
            document.getElementById('user-avatar').src = avatarUrl;
            document.getElementById('profile-avatar').src = avatarUrl;
            
            // Update stats
            document.getElementById('total-ads').textContent = userData.totalAdsWatched || 0;
            document.getElementById('total-ads-count').textContent = userData.totalAdsWatched || 0;
            document.getElementById('today-ads').textContent = userData.todayAdsWatched || 0;
            document.getElementById('total-watch-time').textContent = Math.round((userData.totalWatchTime || 0) / 60) + ' min';
            
            // Update history page stats
            document.getElementById('history-total').textContent = userData.totalAdsWatched || 0;
            document.getElementById('history-today').textContent = userData.todayAdsWatched || 0;
            
            // Update member since
            const memberDate = new Date(userData.memberSince || new Date());
            document.getElementById('member-since').textContent = memberDate.toLocaleDateString();
            
            // Calculate daily average
            const daysSinceJoin = Math.max(1, Math.ceil((new Date() - memberDate) / (1000 * 60 * 60 * 24)));
            const dailyAverage = Math.round((userData.totalAdsWatched || 0) / daysSinceJoin);
            document.getElementById('daily-average').textContent = dailyAverage;
        }

        // ============================================
        // AD FUNCTIONS
        // ============================================

        function loadAds() {
            const ads = [
                {
                    id: 1,
                    category: "Technology",
                    title: "New Smartphone Launch",
                    duration: 45,
                    reward: "+1 Ad"
                },
                {
                    id: 2,
                    category: "Entertainment",
                    title: "Streaming Service Promotion",
                    duration: 50,
                    reward: "+1 Ad",
                    hasExternal: true
                },
                {
                    id: 3,
                    category: "E-commerce",
                    title: "Festival Sale Preview",
                    duration: 40,
                    reward: "+1 Ad"
                },
                {
                    id: 4,
                    category: "Finance",
                    title: "Digital Banking App",
                    duration: 55,
                    reward: "+1 Ad"
                },
                {
                    id: 5,
                    category: "Food",
                    title: "Food Delivery Service",
                    duration: 35,
                    reward: "+1 Ad",
                    hasExternal: true
                },
                {
                    id: 6,
                    category: "Special",
                    title: "Premium Product Review",
                    duration: 90,
                    reward: "+1 Ad"
                }
            ];
            
            const dashboardAds = document.getElementById('dashboard-ads');
            const adsList = document.getElementById('ads-list');
            
            if (dashboardAds) {
                // Show only 3 ads on dashboard
                const dashboardAdsList = ads.slice(0, 3);
                dashboardAds.innerHTML = dashboardAdsList.map(ad => createAdCard(ad)).join('');
            }
            
            if (adsList) {
                adsList.innerHTML = ads.map(ad => createAdCard(ad)).join('');
            }
        }

        function createAdCard(ad) {
            return `
                <div class="ad-card">
                    <div class="ad-header">
                        <span class="ad-category" style="${ad.category === 'Special' ? 'background: var(--accent);' : ''}">
                            ${ad.category}
                        </span>
                        <h3 class="ad-title">${ad.title}</h3>
                    </div>
                    <div class="ad-body">
                        <div class="ad-duration">
                            <i class="far fa-clock"></i> ${ad.duration} seconds
                        </div>
                        <div class="ad-reward">
                            <div>
                                <div>Watch Now</div>
                                <div class="reward-amount">${ad.reward}</div>
                            </div>
                            <button class="watch-btn" onclick="watchAd(${ad.duration}, '${ad.title}')">
                                <i class="fas fa-play"></i> Watch Now
                            </button>
                        </div>
                        ${ad.hasExternal ? `
                            <button class="external-ad-btn ${ad.id === 5 ? '' : 'secondary'}" onclick="startExternalAd('${ad.title}')">
                                <i class="fas fa-${ad.id === 5 ? 'rocket' : 'external-link-alt'}"></i>
                                ${ad.id === 5 ? 'Start Quick Ad' : 'Watch External Ad'}
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        function watchAd(duration, title) {
            if (!currentUser) {
                alert('Please login first');
                return;
            }
            
            currentAdDuration = duration;
            currentAdTitle = title;
            
            document.getElementById('adDuration').textContent = duration;
            document.getElementById('adTimer').textContent = duration;
            document.getElementById('timeLeft').textContent = duration;
            document.getElementById('adProgressBar').style.width = '0%';
            document.getElementById('completeAdBtn').style.display = 'none';
            
            openModal('adModal');
            
            // Start timer
            let timeLeft = duration;
            adTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('adTimer').textContent = timeLeft;
                document.getElementById('timeLeft').textContent = timeLeft;
                
                // Update progress bar
                const progress = ((duration - timeLeft) / duration) * 100;
                document.getElementById('adProgressBar').style.width = progress + '%';
                
                if (timeLeft <= 0) {
                    clearInterval(adTimer);
                    document.getElementById('completeAdBtn').style.display = 'block';
                    document.getElementById('adMessage').textContent = 'Click Complete to add this ad to your history';
                }
            }, 1000);
        }

        async function completeAd() {
            if (!currentUser) return;
            
            // Update user data
            userData.totalAdsWatched = (userData.totalAdsWatched || 0) + 1;
            userData.todayAdsWatched = (userData.todayAdsWatched || 0) + 1;
            userData.totalWatchTime = (userData.totalWatchTime || 0) + currentAdDuration;
            
            // Add to history
            const historyEntry = {
                id: Date.now(),
                title: currentAdTitle,
                duration: currentAdDuration,
                date: new Date().toLocaleDateString(),
                time: new Date().toLocaleTimeString(),
                timestamp: Date.now()
            };
            
            if (!userData.watchHistory) {
                userData.watchHistory = [];
            }
            userData.watchHistory.unshift(historyEntry);
            
            // Save to Firestore
            await saveUserData();
            
            // Update UI
            updateUI();
            loadHistory();
            
            // Show success
            alert('Ad watched successfully! Added to your history.');
            closeModal('adModal');
        }

        function startExternalAd(title) {
            if (!currentUser) {
                alert('Please login first');
                return;
            }
            
            // Open external ad in new tab
            window.open('https://warhealthy.com/du11ar5q?key=6a75e03c0963e8ba56736287ed2a8ee1', '_blank');
            
            // Simulate ad completion after delay
            setTimeout(async () => {
                userData.totalAdsWatched = (userData.totalAdsWatched || 0) + 1;
                userData.todayAdsWatched = (userData.todayAdsWatched || 0) + 1;
                userData.totalWatchTime = (userData.totalWatchTime || 0) + 30; // Assume 30 seconds
                
                const historyEntry = {
                    id: Date.now(),
                    title: title + ' (External)',
                    duration: 30,
                    date: new Date().toLocaleDateString(),
                    time: new Date().toLocaleTimeString(),
                    timestamp: Date.now()
                };
                
                if (!userData.watchHistory) {
                    userData.watchHistory = [];
                }
                userData.watchHistory.unshift(historyEntry);
                
                await saveUserData();
                updateUI();
                loadHistory();
                
                alert('External ad watched! Added to your history.');
            }, 5000);
        }

        function loadHistory() {
            const historyItems = document.getElementById('history-items');
            if (!historyItems) return;
            
            if (!userData.watchHistory || userData.watchHistory.length === 0) {
                historyItems.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--gray);">
                        <i class="fas fa-history" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <h3>No watch history yet</h3>
                        <p>Start watching ads to see your history here</p>
                    </div>
                `;
                return;
            }
            
            // Show only last 10 items
            const recentHistory = userData.watchHistory.slice(0, 10);
            
            historyItems.innerHTML = recentHistory.map(item => `
                <div style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid var(--primary);">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>${item.title}</strong>
                            <div style="color: var(--gray); font-size: 0.9rem; margin-top: 5px;">
                                ${item.date}  ${item.time}  ${item.duration} seconds
                            </div>
                        </div>
                        <span style="color: var(--success); font-weight: bold;"> Watched</span>
                    </div>
                </div>
            `).join('');
        }

        // ============================================
        // UTILITY FUNCTIONS
        // ============================================

        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            if (adTimer) {
                clearInterval(adTimer);
                adTimer = null;
            }
        }

        function getErrorMessage(errorCode) {
            const messages = {
                'auth/invalid-email': 'Invalid email address.',
                'auth/user-disabled': 'This account has been disabled.',
                'auth/user-not-found': 'No account found with this email.',
                'auth/wrong-password': 'Incorrect password.',
                'auth/email-already-in-use': 'Email already in use.',
                'auth/weak-password': 'Password is too weak.',
                'auth/operation-not-allowed': 'Operation not allowed.',
                'auth/too-many-requests': 'Too many requests. Try again later.',
                'auth/network-request-failed': 'Network error. Check your connection.',
                'auth/popup-closed-by-user': 'Sign-in popup was closed.',
                'auth/cancelled-popup-request': 'Sign-in cancelled.',
                'auth/popup-blocked': 'Sign-in popup was blocked by your browser.'
            };
            
            return messages[errorCode] || 'An error occurred. Please try again.';
        }

        function showTerms() {
            alert('Terms of Service:\n\n1. You must be at least 18 years old to use this service.\n2. Do not create multiple accounts.\n3. Follow all applicable laws and regulations.\n4. We reserve the right to terminate accounts that violate our terms.');
        }

        function showPrivacy() {
            alert('Privacy Policy:\n\n1. We collect only necessary information for authentication.\n2. Your ad watching data is stored securely.\n3. We do not share your personal information with third parties.\n4. You can delete your account and data at any time.');
        }

        function toggleProfileMenu() {
            // Navigate to profile page
            navigateTo('profile');
        }

        function navigateTo(page) {
            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            
            // Activate selected page
            document.querySelector(`.nav-link[data-page="${page}"]`).classList.add('active');
            document.getElementById(`${page}-page`).classList.add('active');
            
            // Load specific page data
            if (page === 'history') {
                loadHistory();
            }
        }

        // ============================================
        // INITIALIZATION
        // ============================================

        document.addEventListener('DOMContentLoaded', function() {
            // Navigation click handlers
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    navigateTo(this.getAttribute('data-page'));
                });
            });
            
            // Auto-focus first input
            document.getElementById('login-email')?.focus();
            
            // Add event listener for Enter key in forms
            document.querySelectorAll('.form-input').forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        const form = this.closest('form');
                        if (form) {
                            const submitBtn = form.querySelector('button[type="submit"]');
                            if (submitBtn) submitBtn.click();
                        }
                    }
                });
            });
        });

        // ============================================
        // IMPORTANT: SETUP FIREBASE
        // ============================================
        /*
        To make this app work, you need to:
        
        1. Go to Firebase Console: https://console.firebase.google.com
        2. Create a new project
        3. Enable Authentication:
           - Go to Authentication  Sign-in method
           - Enable Email/Password provider
           - Enable Google provider
        4. Enable Firestore Database:
           - Go to Firestore Database
           - Click "Create database"
           - Start in test mode
        5. Get your Firebase config:
           - Go to Project Settings (gear icon)
           - Scroll to "Your apps"
           - Click web app icon (</>)
           - Register app with nickname "AdWatch Pro"
           - Copy the configuration object
        6. Replace the firebaseConfig object above with your actual config
        */

    </script>
</body>
</html>
